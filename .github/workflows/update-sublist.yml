name: Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§

on:
  schedule:
    - cron: '0 0 * * *'  # Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª Û°Û°:Û°Û° UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-lists:
    runs-on: ubuntu-latest

    steps:
      - name: Ú©Ù„ÙˆÙ† Ø±ÛŒÙ¾ÙˆØ²ÛŒØªÙˆØ±ÛŒ
        uses: actions/checkout@v3

      - name: Ù†ØµØ¨ Ù¾Ø§ÛŒØªÙˆÙ† Ùˆ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§
        run: |
          python -m pip install --upgrade pip
          pip install ruamel.yaml urllib3

      - name: Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø§ÛŒØªÙˆÙ†
        id: run-script
        run: |
          python3 update_sublist.py || exit 1

      - name: Ú©Ø§Ù…ÛŒØª Ùˆ Ù¾ÙˆØ´ ØªØºÛŒÛŒØ±Ø§Øª
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ðŸ”ƒ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ"
          add: |
            *.txt
            Sublist/
